#!groovy
@Library('github.com/wooga/atlas-jenkins-pipeline@detach/test-lib') _

def call(Map configMap = [:]) {
    javaLibs(configMap) { stages ->
        stages.check = { check, params, config ->
            check.when = {
                anyOf {
                    changeset comparator: 'GLOB', pattern: 'atlas-jenkins-pipeline-gradle/**'
                    isRestartedRun()
                    triggeredBy 'UserIdCause'
                }
            }
        }

        stages.publish = { publish, params, config ->
            publish.when = { false }
        }
    }
}

call(plaforms: ['unix'], checkDir: "atlas-jenkins-pipeline-gradle")
